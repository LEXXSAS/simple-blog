import{R,r as n,j as e}from"./react-64cc6456.js";import{c as Ne}from"./react-dom-a6bd7853.js";import{L as x,c as Pe,R as Ie}from"./react-router-dom-d8c941e2.js";import{u as E,a as p,P as Ee}from"./react-redux-09f5e4cd.js";import{c as v,a as I,b as be,f as Re,d as Ue}from"./@reduxjs-863128a7.js";import{a as j}from"./axios-4d564c32.js";import{c as oe,a as U}from"./yup-0f34933d.js";import{o as Ae}from"./@hookform-c217e4a9.js";import{u as ae,F as ie}from"./react-hook-form-562096cd.js";import{c as B,d as O,O as De}from"./react-router-6f2a948d.js";import{u as Oe}from"./react-intersection-observer-9c7ef85c.js";import{I as ne,_ as F}from"./react-hot-toast-21bfcf80.js";import{h as M}from"./moment-a9aaa855.js";import{R as ke}from"./react-quill-042080e8.js";/* empty css                    */import{Q as Be,a as Fe}from"./react-query-e2e7fe09.js";import"./lodash-c86a663f.js";import"./scheduler-765c72db.js";import"./@remix-run-e9cd9753.js";import"./use-sync-external-store-75d8866b.js";import"./redux-ea15d17b.js";import"./immer-df973b50.js";import"./reselect-07fd8978.js";import"./redux-thunk-f771c803.js";import"./property-expr-38205fa5.js";import"./tiny-case-d0726479.js";import"./toposort-a73d2261.js";import"./goober-70b4b9ca.js";import"./quill-67d61cc6.js";import"./@babel-a3f164e7.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function A(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(a){if(a.ep)return;a.ep=!0;const i=A(a);fetch(a.href,i)}})();const Qe={load:!1,status:"uninitialized",registerdata:null,err:null},W=v("registerdata/userLogin",async(t,{rejectWithValue:s,dispatch:A})=>{try{const o=await j.post("http://localhost:8888/api/auth/register",t);A(re(o.data))}catch(o){console.log(o),A(J(o.response.data))}}),le=I({name:"registerdata",initialState:Qe,reducers:{setRegister:(t,s)=>{t.registerdata=s.payload,t.load=!1},setRegisterError:(t,s)=>{t.err=s.payload,t.load=!1}},extraReducers:t=>{t.addCase(W.pending,(s,A)=>{s.status="loading",s.load=!0}),t.addCase(W.fulfilled,(s,A)=>{s.status="fulfilled"})}}),{setRegister:re,setRegisterError:J}=le.actions,Le=le.reducer,Ge=oe().shape({username:U().min(2,"Логин должен содержать минимум 2 символа").required("Укажите логин"),email:U().min(4,"Почта должна содержать минимум 4 символа").email().required("Укажите почту"),password:U().min(8,"Пароль должен содержать минимум 8 символов").max(32).matches(/(?=.*[!@#$%^&*()\-_=+{};:,<.>]{1})/,"Пароль должен содержать хотя бы один спецсимвол").required("Это обязательное поле")}),Ve=()=>{var y,N,f;const t=E(),s=p(m=>m.register.err),A=p(m=>m.register.registerdata),o=R.useRef(),{handleSubmit:a,register:i,formState:{errors:l}}=ae({resolver:Ae(Ge)}),[d,w]=n.useState({username:"",email:"",password:""}),K=B();n.useEffect(()=>{A==="Пользователь создан успешно"&&(o.current.reset(),t(re(null)),t(J(null)),K("/login"))},[A]);const g=m=>{w(r=>({...r,[m.target.name]:m.target.value}))},C=async()=>{t(J(null)),t(W(d))},c=m=>{m.key==="Enter"&&C()};return console.log("registerdata",A),console.log("err",s),e.jsxs("div",{className:"auth",children:[e.jsx("h1",{children:"Регистрация"}),e.jsx(ie,{children:e.jsxs("form",{ref:o,onKeyPress:c,children:[e.jsxs("div",{children:[e.jsx("input",{...i("username"),type:"text",placeholder:"имя пользователя",name:"username",onChange:g}),!l.username&&!s&&e.jsx("p",{}),s&&e.jsx("p",{children:s}),l.username&&e.jsx("p",{children:(y=l.username)==null?void 0:y.message})]}),e.jsxs("div",{children:[e.jsx("input",{...i("email"),type:"email",placeholder:"email",name:"email",onChange:g}),!l.email&&e.jsx("p",{}),l.email&&e.jsx("p",{children:(N=l.email)==null?void 0:N.message})]}),e.jsxs("div",{children:[e.jsx("input",{...i("password"),type:"text",placeholder:"пароль",name:"password",onChange:g}),!l.password&&e.jsx("p",{}),l.password&&e.jsx("p",{children:(f=l.password)==null?void 0:f.message})]}),e.jsx("button",{onClick:a(C),children:"Зарегистрироваться"}),e.jsxs("span",{children:["Уже есть аккаунт? ",e.jsx(x,{to:"/login",children:"Войти"})]})]})})]})},Ye={load:!1,status:"uninitialized",currentUser:JSON.parse(localStorage.getItem("user"))||null,err:null,useravatar:null},T=v("currentUser/userLogin",async(t,{rejectWithValue:s,dispatch:A})=>{try{const o=await j.post("http://localhost:8888/api/auth/login",t,{withCredentials:!0});A(Me(o.data))}catch(o){A(z(o.response.data))}}),He=v("currentUser/userLogout",async(t,{rejectWithValue:s,dispatch:A})=>{try{await j.post("http://localhost:8888/api/auth/logout",t,{withCredentials:!0}),A(We(null)),localStorage.removeItem("user")}catch(o){console.log(o)}}),ce=I({name:"currentUser",initialState:Ye,reducers:{setUser:(t,s)=>{t.currentUser=s.payload,t.useravatar=s.payload.img,t.load=!1},setUserNull:(t,s)=>{t.currentUser=s.payload,t.load=!1},setUserError:(t,s)=>{t.err=s.payload,t.load=!1}},extraReducers:t=>{t.addCase(T.pending,(s,A)=>{s.status="loading",s.load=!0}),t.addCase(T.fulfilled,(s,A)=>{s.status="fulfilled"})}}),{setUser:Me,setUserNull:We,setUserError:z}=ce.actions,Je=ce.reducer,Te=oe().shape({username:U().min(2,"Логин должен содержать минимум 2 символа").required("Укажите логин"),password:U().max(32).required("Это обязательное поле")}),ze=()=>{var y,N;const t=E(),s=p(f=>f.user.err),A=p(f=>f.user.currentUser),o=R.useRef(),{handleSubmit:a,register:i,formState:{errors:l}}=ae({resolver:Ae(Te)}),[d,w]=n.useState({username:"",password:""}),K=B();R.useEffect(()=>{A!==null&&(o.current.reset(),t(z(null)),K("/"))},[A]);const g=f=>{w(m=>({...m,[f.target.name]:f.target.value}))},C=async()=>{t(z(null)),t(T(d))},c=f=>{f.key==="Enter"&&C()};return e.jsxs("div",{className:"auth",children:[e.jsx("h1",{children:"Login"}),e.jsx(ie,{children:e.jsxs("form",{ref:o,onKeyPress:c,children:[e.jsxs("div",{children:[e.jsx("input",{...i("username"),type:"text",placeholder:"имя пользователя",name:"username",onChange:g}),!l.username&&!s&&e.jsx("p",{}),s&&e.jsx("p",{children:s}),l.username&&e.jsx("p",{children:(y=l.username)==null?void 0:y.message})]}),e.jsxs("div",{children:[e.jsx("input",{...i("password"),type:"text",placeholder:"пароль",name:"password",onChange:g}),!l.password&&e.jsx("p",{}),l.password&&e.jsx("p",{children:(N=l.password)==null?void 0:N.message})]}),e.jsx("button",{onClick:a(C),children:"Войти"}),e.jsxs("span",{children:["У вас нет аккаунта? ",e.jsx(x,{to:"/register",children:"Зарегистрироваться"})]})]})})]})},Ze={posts:[],postscategory:[],load:!1,status:"uninitialized",newcurrentpage:1,rowperpage:null,error:null};v("posts/getPosts",async({currentpage:t},{rejectWithValue:s,dispatch:A,getState:o})=>{let a=o().singlepost.post.cat;try{if(t!==null&&a!==""&&a!==void 0){console.log("cat in post",a);const i=await j.get(`http://localhost:8888/api/posts?currentpage=${t}&cat=${a}`);A(qe(i.data))}else return}catch(i){console.log(i)}});v("posts/getPostsNextPage",async({cat:t,currentpage:s,count:A},{rejectWithValue:o,dispatch:a})=>{try{if(t!==""&&(t=t.split("=")[1]),s++,s>=A-1)return;const i=await j.get(`http://localhost:8888/api/posts/nextpage?currentpage=${s}&cat=${t}`);localStorage.setItem("starnewpage",i.data.starnewpage),a(ge(i.data))}catch(i){console.log(i)}});v("posts/getPostsNextPage",async({cat:t,currentpage:s,count:A},{rejectWithValue:o,dispatch:a})=>{try{if(t!==""&&(t=t.split("=")[1]),s--,s<=1)return;const i=await j.get(`http://localhost:8888/api/posts/previouspage?currentpage=${s}&cat=${t}`);localStorage.setItem("starnewpage",i.data.starnewpage),a(ge(i.data))}catch(i){console.log(i)}});const de=I({name:"posts",initialState:Ze,reducers:{setPosts:(t,s)=>{t.posts=s.payload.data,t.rowperpage=s.payload.rowperpage,t.load=!1},setPostsCategory:(t,s)=>{t.postscategory=s.payload.data,t.rowperpage=s.payload.rowperpage,t.load=!1},setPostsNextPosts:(t,s)=>{t.posts=s.payload.data,t.newcurrentpage=s.payload.starnewpage,t.load=!1},setNewPage:(t,s)=>{t.newcurrentpage=s.payload},setNewPageZero:(t,s)=>{t.newcurrentpage=1},setNewCurrentPage:(t,s)=>{t.newcurrentpage=s.payload}}}),{setPosts:Ns,setNewPage:Ps,setPostsNextPosts:ge,setNewPageZero:ue,setPostsCategory:qe,setNewCurrentPage:te}=de.actions,$e=de.reducer,Xe={status:"uninitialized",count:null,allpages:null},k=v("count/getCount",async(t,{rejectWithValue:s,dispatch:A})=>{try{t!==""&&(t=t.split("=")[1]);const o=await j.get(`http://localhost:8888/api/posts/count?cat=${t}`);A(_e(o.data.count)),A(et(o.data.pages))}catch(o){console.log(o)}}),Ce=I({name:"count",initialState:Xe,reducers:{setCount:(t,s)=>{t.count=s.payload},setCountAllPages:(t,s)=>{t.allpages=s.payload}},extraReducers:t=>{t.addCase(k.pending,(s,A)=>{s.status="loading"}),t.addCase(k.fulfilled,(s,A)=>{s.status="fulfilled"})}}),{setCount:_e,setCountAllPages:et}=Ce.actions,tt=Ce.reducer,st={file:null,loadfile:!1,statusavatarupload:"uninitialized"},Z=v("file/uploadFile",async(t,{rejectWithValue:s,dispatch:A})=>{try{const o=await j.post("http://localhost:8888/api/uploadavatar/avatar",t,{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"multipart/form-data"}});A(q(o.data))}catch(o){console.log(o)}}),pe=I({name:"file",initialState:st,reducers:{setAvatarFile:(t,s)=>{t.file=s.payload,t.loadfile=!1},setStatusFileUpload:(t,s)=>{t.statusavatarupload="uninitialized"}},extraReducers:t=>{t.addCase(Z.pending,(s,A)=>{s.statusavatarupload="loading",s.loadfile=!0}),t.addCase(Z.fulfilled,(s,A)=>{s.statusavatarupload="fulfilled"})}}),{setAvatarFile:q,setStatusFileUpload:ot}=pe.actions,At=pe.reducer,G=({src:t,placeholderSrc:s,width:A="100%",...o})=>{const[a,i]=n.useState(s),l=`progressive ${a===s?"loading":"loaded"}`;return n.useEffect(()=>{const d=new Image;d.src=t,d.onload=()=>{i(t)}},[t]),e.jsx("img",{className:l,src:a,alt:o.alt||"",width:A})},at=({props:t})=>{const{post:s}=t,{ref:A,inView:o}=Oe({threshold:.5,triggerOnce:!0});return e.jsxs("div",{ref:A,id:"post",className:"post",children:[e.jsx("div",{className:"img",children:o?e.jsx(x,{className:"link",to:`/post/${s.id}`,children:e.jsx(G,{src:s==null?void 0:s.xl,placeholderSrc:s==null?void 0:s.sm,width:"396.6",height:"400"})}):e.jsx(x,{className:"link",to:`/post/${s.id}`,children:e.jsx(G,{src:s==null?void 0:s.sm,placeholderSrc:s==null?void 0:s.sm,width:"396.6",height:"400"})})}),e.jsxs("div",{className:"content",children:[e.jsx(x,{className:"link",to:`/post/${s.id}`,children:e.jsx("h1",{id:"home-title",children:s.title})}),e.jsx("div",{style:{flexGrow:"1"},id:"home-desc",dangerouslySetInnerHTML:{__html:s.desc}}),e.jsx(x,{className:"link",to:`/post/${s.id}`,children:e.jsx("button",{children:"Read more"})})]})]},s.id)},L=be({reducerPath:"dataApi",tagTypes:["getPostsApi"],baseQuery:Re({baseUrl:"http://localhost:8888/api/"}),endpoints:t=>({getData:t.query({queryFn:async({cat:s="",countresult:A="",currentpage:o=""})=>{try{return s!==""&&s!==void 0&&(s=s.split("=")[1]),o!==null?{data:(await j.get(`http://localhost:8888/api/posts?currentpage=${o}&cat=${s}&countresult=${A}`)).data}:{data:(await j.get(`http://localhost:8888/api/posts?currentpage=0&cat=${s}`)).data}}catch(a){return{error:a.message}}},providesTags:s=>s?[...s.data.map(({id:A})=>({type:"getPostsApi",id:A})),{type:"getPostsApi",id:"POST"}]:[{type:"getPostsApi",id:"POST"}]}),getCategegoryData:t.query({queryFn:async({cat:s="",currentpage:A=""})=>{try{return A!==null&&A>=0&&s!==""&&s!==void 0?{data:(await j.get(`http://localhost:8888/api/posts?currentpage=${A}&cat=${s}`)).data}:{data:[]}}catch(o){return{error:o.message}}},invalidatesTags:[{type:"getPostsApi",id:"POST"}]}),updateData:t.mutation({queryFn:async({cat:s="",countresult:A="",currentpage:o=""})=>{try{return s!==""&&s!==void 0&&(s=s.split("=")[1]),o!==null?{data:(await j.get(`http://localhost:8888/api/posts?currentpage=${o}&cat=${s}&countresult=${A}`)).data}:{data:(await j.get(`http://localhost:8888/api/posts?currentpage=0&cat=${s}`)).data}}catch(a){return{error:a.message}}},invalidatesTags:[{type:"getPostsApi",id:"POST"}]})})}),{useGetDataQuery:it,useGetCategegoryDataQuery:nt,useUpdateDataMutation:lt}=L,rt=({totalPosts:t,postsPerPages:s,setCurrentPage:A,currentPage:o})=>{const a=R.useMemo(()=>{let i=[];if(t.length!==0)for(let l=1;l<=Math.ceil(t/s);l++)i.push(l);return i},[t]);return e.jsx("div",{className:"pagination",children:a.map((i,l)=>e.jsx("button",{onClick:()=>A(i),className:i==o?"active":"",children:i},l))})},ct={info:null},Ke=I({name:"posts",initialState:ct,reducers:{setInfoReducer:(t,s)=>{t.info=s.payload},setInfoDefaulReducer:(t,s)=>{t.info=s.payload}}}),{setInfoReducer:b,setInfoDefaulReducer:H}=Ke.actions,dt=Ke.reducer,gt={display:"flex",padding:"8px 16px",alignItems:"center",fontFamily:"cursive",backgroundColor:"#ad52ee43",borderRadius:"3px",fontSize:"1rem"},ut={display:"flex",padding:"8px 16px",alignItems:"center",fontFamily:"cursive",backgroundColor:"#52eec243",borderRadius:"3px",fontSize:"1rem"},Ct={display:"flex",padding:"8px 16px",alignItems:"center",fontFamily:"cursive",backgroundColor:"#ee835243",borderRadius:"3px",fontSize:"1rem"},pt=t=>F.custom(e.jsxs("div",{style:gt,children:[e.jsx("div",{children:"✅"}),e.jsx("div",{children:t})]}),{duration:4e3,position:"top-center"}),Kt=t=>F.custom(e.jsxs("div",{style:ut,children:[e.jsx("div",{children:"✅"}),e.jsx("div",{children:t})]}),{duration:4e3,position:"top-center"}),mt=t=>F.custom(e.jsxs("div",{style:Ct,children:[e.jsx("div",{children:"✅"}),e.jsx("div",{children:t})]}),{duration:4e3,position:"top-center",icon:"✅",style:{background:"#52eebf43"}}),ht=()=>{const t=E(),s=p(S=>S.countpages.count),A=p(S=>S.user.currentUser),o=p(S=>S.info.info),[a,i]=n.useState([]),[l,d]=n.useState(1),[w,K]=n.useState(!1),g=O().search,C=O().pathname,{data:c=[],error:y,isLoading:N,isError:f,isSuccess:m,isFetching:r,isUninitialized:h}=it({cat:g,countresult:s||"",currentpage:l-1},{skip:!w}),P=p(S=>S.write.statusupdatepost),u=p(S=>S.deletesinglepost.status),[Se]=lt();return n.useEffect(()=>{},[c]),n.useEffect(()=>{console.log("%cinfo =>","color: #52eec29a",o)},[o]),n.useEffect(()=>(o!==null&&o==="created"&&setTimeout(()=>{mt("Пост успешно создан")},[250]),()=>{t(H(null))}),[o]),n.useEffect(()=>(o!==null&&o==="updated"&&setTimeout(()=>{Kt("Пост успешно обновлен")},[250]),()=>{t(H(null))}),[o]),n.useEffect(()=>(o!==null&&o==="deleted"&&setTimeout(()=>{pt("Пост успешно удален")},[250]),()=>{t(H(null))}),[o]),n.useEffect(()=>{(P=="fulfilled"||u=="fulfilled")&&(Se({cat:g,countresult:s||"",currentpage:l-1}),t(k(g)))},[P,u]),n.useEffect(()=>{s!==null&&setTimeout(()=>{K(!0)},250)},[s]),n.useEffect(()=>{localStorage.setItem("user",JSON.stringify(A))},[A]),n.useEffect(()=>{C.split("/")[1]===""&&(localStorage.setItem("starnewpage",0),localStorage.setItem("category",g.split("=")[1]),t(k(g)),t(ue()),d(1),t(te(1)))},[g]),n.useEffect(()=>{c.length!==0&&i(c.rowperpage)},[c]),n.useEffect(()=>{localStorage.setItem("category","undefined"),localStorage.setItem("menu_currentpage",0),t(ot())},[]),f?(console.log("error",y),e.jsxs("div",{style:{minHeight:"calc(100vh - 70px)",marginTop:"1rem"},children:[e.jsx("br",{}),e.jsx("h1",{id:"home-title"}),e.jsxs("div",{style:{flexGrow:"1"},id:"home-desc",children:[e.jsx("h1",{className:"information-text",children:y}),e.jsx("br",{}),e.jsx("hr",{})]})]})):N||h?e.jsx("div",{className:"home",children:e.jsx("div",{className:"posts",children:e.jsx("div",{id:"post",className:"post",children:e.jsxs("div",{className:"content",children:[e.jsx("h1",{id:"home-title"}),e.jsx("div",{id:"home-desc",children:e.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"center",flexGrow:"1"},children:e.jsxs("div",{className:"lds-ellipsis",children:[e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]})})})]})},"")})}):m&&c.data.length<1?e.jsx("div",{className:"home",children:e.jsx("div",{className:"posts",children:e.jsx("div",{id:"post",className:"post",children:e.jsxs("div",{className:"content",children:[e.jsx("h1",{id:"home-title"}),e.jsx("div",{style:{flexGrow:"1"},id:"home-desc",children:e.jsx("h1",{children:"Пока тут ничего нет..."})})]})},"")})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"home",children:[e.jsx(ne,{}),e.jsxs("div",{className:"posts",children:[c.data&&c.data.map(S=>e.jsx(at,{props:{post:S}},S.id)),a.length!==0&&e.jsx(rt,{postsPerPages:a,setCurrentPage:d,currentPage:l,totalPosts:s})]})]})})},me="/assets/logo-61a0bcc3.png",ft=()=>{const t=E(),s=p(a=>a.user.currentUser),[A,o]=n.useState(null);return n.useEffect(()=>{o(s!==null?s:null)},[s]),e.jsx("div",{className:"navbar",children:e.jsxs("div",{className:"container",children:[e.jsx("div",{id:"logo",className:"logo",children:e.jsx(x,{to:"/",onClick:()=>location.pathname("/"),children:e.jsx("img",{src:me,alt:""})})}),e.jsxs("div",{id:"links",className:"links",children:[e.jsx(x,{className:"link",to:"/?cat=art",children:e.jsx("h6",{children:"ART"})}),e.jsx(x,{className:"link",to:"/?cat=science",children:e.jsx("h6",{children:"SCIENCE"})}),e.jsx(x,{className:"link",to:"/?cat=technology",children:e.jsx("h6",{children:"TECHNOLOGY"})}),e.jsx(x,{className:"link",to:"/?cat=cinema",children:e.jsx("h6",{children:"CINEMA"})}),e.jsx(x,{className:"link",to:"/?cat=design",children:e.jsx("h6",{children:"DESIGN"})}),e.jsx(x,{className:"link",to:"/?cat=food",children:e.jsx("h6",{children:"FOOD"})}),e.jsx(x,{to:"/profile",children:e.jsx("span",{children:A==null?void 0:A.username})}),A?e.jsx("span",{onClick:()=>t(He()),children:"Logout"}):e.jsx(x,{className:"link",to:"/login",children:"Login"}),s!==null?e.jsx("span",{className:"write",children:e.jsx(x,{className:"link",to:"/write",children:"Write"})}):null]})]})})},xt=()=>e.jsxs("footer",{children:[e.jsx("img",{src:me,alt:""}),e.jsxs("span",{children:["Made in 2024 year ",e.jsx("b",{children:"React.js"}),"."]})]}),jt={writepostdata:null,updatepostdata:null,file:null,load:!1,loadfile:!1,writepostload:!1,updatepostload:!1,status:"uninitialized",statusfileupload:"uninitialized",statusupdatepost:"uninitialized",statuswritepost:"uninitialized",infoaboutaddorupdateapost:""},$=v("file/uploadFile",async(t,{rejectWithValue:s,dispatch:A})=>{try{const o=await j.post("http://localhost:8888/api/upload",t,{withCredentials:!0,headers:{Accept:"application/json","Content-Type":"multipart/form-data"}});A(yt(o.data))}catch(o){console.log(o)}}),V=v("posts/updatePost",async(t,{rejectWithValue:s,dispatch:A})=>{const{state:o,title:a,desc:i,cat:l,img:d}=t;await j.put(`http://localhost:8888/api/posts/${o.id}`,{title:a,desc:i,cat:l,img:d},{withCredentials:!0})}),Y=v("posts/writePost",async(t,{rejectWithValue:s,dispatch:A})=>{const{title:o,desc:a,cat:i,img:l,date:d}=t;await j.post("http://localhost:8888/api/posts/",{title:o,desc:a,cat:i,img:l,date:d},{withCredentials:!0})}),he=I({name:"file",initialState:jt,reducers:{setFile:(t,s)=>{t.file=s.payload,t.loadfile=!1},setFileNull:(t,s)=>{t.file=null,t.loadfile=!1},setStatusFileUploadNull:(t,s)=>{t.statusfileupload="uninitialized",t.loadfile=!1},setWritePostData:(t,s)=>{t.writepostdata=s.payload,t.loadfile=!1},setInformation:(t,s)=>{t.infoaboutaddorupdateapost=s.payload},setInformationNull:(t,s)=>{t.infoaboutaddorupdateapost=""},setInformationWritePostNull:(t,s)=>{t.statuswritepost="uninitialized"},setInformationUpdatePostNull:(t,s)=>{t.statuswritepost="uninitialized"}},extraReducers:t=>{t.addCase(V.pending,(s,A)=>{s.statusupdatepost="loading",s.updatepostload=!0}),t.addCase(V.fulfilled,(s,A)=>{s.statusupdatepost="fulfilled"}),t.addCase(Y.pending,(s,A)=>{s.statuswritepost="loading",s.updatepostload=!0}),t.addCase(Y.fulfilled,(s,A)=>{s.statuswritepost="fulfilled"}),t.addCase($.pending,(s,A)=>{s.statusfileupload="loading",s.loadfile=!0}),t.addCase($.fulfilled,(s,A)=>{s.statusfileupload="fulfilled"})}}),{setFile:yt,setFileNull:vt,setWritePostData:Is,setStatusFileUploadNull:wt,setInformation:Q,setInformationNull:X,setInformationWritePostNull:Es,setInformationUpdatePostNull:bs}=he.actions,St=he.reducer,fe=({info:t})=>e.jsxs("div",{style:{minHeight:"calc(100vh - 70px)",marginTop:"1rem"},children:[e.jsx("br",{}),e.jsx("h1",{id:"home-title"}),e.jsxs("div",{style:{flexGrow:"1"},id:"home-desc",children:[e.jsx("h1",{className:"information-text",children:t}),e.jsx("br",{}),e.jsx("hr",{}),e.jsx("p",{className:"information-warning",children:"через несколько секунд вы будете перенаправлены на главную страницу"})]})]}),Nt=()=>{const t=E(),s=p(u=>u.write.file),A=p(u=>u.write.statusfileupload),o=p(u=>u.write.infoaboutaddorupdateapost),a=O().state;O().pathname;const[i,l]=n.useState((a==null?void 0:a.desc)||""),[d,w]=n.useState((a==null?void 0:a.title)||""),[K,g]=n.useState(null),[C,c]=n.useState((a==null?void 0:a.cat)||"art"),[y,N]=n.useState((a==null?void 0:a.xl)||""),[f,m]=n.useState(""),r=B(),h=async()=>{if(K!==null){const u=new FormData;u.append("file",K),t($(u))}else a==null&&s==null&&d!==""&&i!==""?(t(Y({title:d,desc:i,cat:C,img:y,date:M(Date.now()).format("YYYY-MM-DD HH:mm:ss")})),t(Q("пост создан без добавления изображения")),t(b("created"))):a!==null&&s==null&&d!==""&&i!==""&&(t(V({state:a,title:d,desc:i,cat:C,img:y})),t(Q("пост обновлен без добавления изображения")),t(b("updated")))};n.useEffect(()=>(A==="fulfilled"&&s!==null&&(a!==null&&d!==""&&i!==""?(t(V({state:a,title:d,desc:i,cat:C,img:s})),t(Q("пост обновлен с добавлением изображения")),t(b("updated"))):d!==""&&i!==""&&(t(Y({title:d,desc:i,cat:C,img:s,date:M(Date.now()).format("YYYY-MM-DD HH:mm:ss")})),t(Q("пост создан с добавлением изображения")),t(b("created")))),()=>{t(vt()),t(wt())}),[A]);const P=async u=>{u.preventDefault(),await h()};return n.useEffect(()=>{t(X()),m("")},[]),n.useEffect(()=>(o!==""&&(o==="пост создан с добавлением изображения"||o==="пост обновлен с добавлением изображения"||o==="пост обновлен без добавления изображения"||o==="пост создан без добавления изображения")&&(m(o),setTimeout(()=>{r("/")},0)),()=>{t(X()),m("")}),[o]),f!==""?e.jsx(fe,{info:f}):e.jsxs("div",{className:"add",children:[e.jsxs("div",{className:"content",children:[e.jsx("input",{type:"text",placeholder:"Title",value:d,onChange:u=>w(u.target.value)}),e.jsx("div",{className:"editorContainer",children:e.jsx(ke,{className:"editor",theme:"snow",value:i,onChange:l})})]}),e.jsxs("div",{className:"menu",children:[e.jsxs("div",{className:"item",children:[e.jsx("h1",{children:"Publish"}),e.jsxs("span",{children:[e.jsx("b",{children:"Status: "})," Draft"]}),e.jsxs("span",{children:[e.jsx("b",{children:"Visibility: "})," Public"]}),e.jsx("input",{style:{display:"none"},type:"file",name:"",id:"file",onChange:u=>g(u.target.files[0])}),e.jsx("label",{className:"file",htmlFor:"file",children:"Upload Image"}),e.jsx("div",{className:"buttons",children:e.jsx("button",{onClick:P,children:"Publish"})})]}),e.jsxs("div",{className:"item",children:[e.jsx("h1",{children:"Category"}),e.jsxs("div",{className:"cat",children:[e.jsx("input",{type:"radio",checked:C==="art",name:"cat",value:"art",id:"art",onChange:u=>c(u.target.value)}),e.jsx("label",{htmlFor:"art",children:"Art"})]}),e.jsxs("div",{className:"cat",children:[e.jsx("input",{type:"radio",checked:C==="science",name:"cat",value:"science",id:"science",onChange:u=>c(u.target.value)}),e.jsx("label",{htmlFor:"science",children:"Science"})]}),e.jsxs("div",{className:"cat",children:[e.jsx("input",{type:"radio",checked:C==="technology",name:"cat",value:"technology",id:"technology",onChange:u=>c(u.target.value)}),e.jsx("label",{htmlFor:"technology",children:"Technology"})]}),e.jsxs("div",{className:"cat",children:[e.jsx("input",{type:"radio",checked:C==="cinema",name:"cat",value:"cinema",id:"cinema",onChange:u=>c(u.target.value)}),e.jsx("label",{htmlFor:"cinema",children:"Cinema"})]}),e.jsxs("div",{className:"cat",children:[e.jsx("input",{type:"radio",checked:C==="design",name:"cat",value:"design",id:"design",onChange:u=>c(u.target.value)}),e.jsx("label",{htmlFor:"design",children:"Design"})]}),e.jsxs("div",{className:"cat",children:[e.jsx("input",{type:"radio",checked:C==="food",name:"cat",value:"food",id:"food",onChange:u=>c(u.target.value)}),e.jsx("label",{htmlFor:"food",children:"Food"})]})]})]})]})},Pt="/assets/edit-04ba7a77.png",It="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADmGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpBdHRyaWI9J2h0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8nPgogIDxBdHRyaWI6QWRzPgogICA8cmRmOlNlcT4KICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDIyLTA5LTIzPC9BdHRyaWI6Q3JlYXRlZD4KICAgICA8QXR0cmliOkV4dElkPmM4Nzk5NmE5LWU4NGQtNGM3Zi1iZTRjLWM5YzBmZDc5NzAxYzwvQXR0cmliOkV4dElkPgogICAgIDxBdHRyaWI6RmJJZD41MjUyNjU5MTQxNzk1ODA8L0F0dHJpYjpGYklkPgogICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+CiAgICA8L3JkZjpsaT4KICAgPC9yZGY6U2VxPgogIDwvQXR0cmliOkFkcz4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6cGRmPSdodHRwOi8vbnMuYWRvYmUuY29tL3BkZi8xLjMvJz4KICA8cGRmOkF1dGhvcj5MYW1hIERldjwvcGRmOkF1dGhvcj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wPSdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvJz4KICA8eG1wOkNyZWF0b3JUb29sPkNhbnZhPC94bXA6Q3JlYXRvclRvb2w+CiA8L3JkZjpEZXNjcmlwdGlvbj4KPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0ncic/PsfwAB4AAAjrSURBVGiB1ZpdjF1VFcd//33uTD+cKbXWpgkh9YGSAIqBYBoTAhFQUWmCIUqEN/tCQjQUKvGxj0gL8yBEHsBgYoSAkggVmhhrFSKRAMKDomBAPnzipUML7cy95/x9WHvfc+50OnOnLY1dyc29555z9l7/tddae31sMQb5/vvh6FFoGpichLpOpARN0wAwMQH9/gXAdcCFwLnAeUhbsD+NBHDI9rtI7wnex/4XsJ9Vq15nbq5MJUBIMa6NgbRr17I8alkQMzMwNwcSrirJjokksC8GvgVcb9gmmMxMUxhBcv4dN+K98kQfeBF4Bvt3SK/l/xMAVdU4JTQ3h+666+SAePdumJ5myFjTVECdmfsysBO4AZgozxgGsm1IAlkqwDFYYNtWSFxArwA2NMA+wQxwEMBSpaaphwJYswbddtv4QDwzg+s6bkrClqGRdC72PcDNlsrLg3w/KaQtwBnc6Pi26TzjeKDJq9YbrpT0a+y7kN4GEk3jLAioKnTHHcsD8d69RSUAUtFXw02CB7A/g2Ts2lCpjBP/BfBxKYAJZwRSTahVwj4M/MD2L7JAE7FqWCLdeefIUGlREDFHomkaVxXYDwgeyyD6meHekOci/ZWAiPfU+Q12D1vYfaRppEeU0sNZrRugMiCbZs+e0aGGIB58EI4caQGGR/qUU3pC8A2kOoOsTkr6Y5DByuPabgTOzP9JcIPtQ0iVoEaCuh46gXZFDh/GAHYsoT1FSgcziD52QqpiPk47CADFqgJYUnLw15d0FfAX4LMKlU7YuKqG7yYA33svhPEKaJicrKiqfcDlSPPYE0NdDgCnHcQoHpS9G8AEMA9cKOlp7NUKNdOQd0DesyfsImwhjNt+CGkH0M8gPhFVWo6cV1+2LM3LngSeAL6LLVIydY1T6qiWXQzq+8AOwq32hhvYSkG0m97S/y1BAmWbsUKgA+A7wE6HcCtSQkCiriElAbUjtJjJzKcF6rQyEOWVwSA+sHBXHxON1BFkEfzdki5AqrNbJlFV8VDYyE+w1xGhQ1oSxFIMFYb7fdi0CTZujN9dgCsbTwZn4Q6QJrHvHr4n0aN1tduQbsn20BvGSMtRYazdleO7ruGaa2DrVkgJXn8dDh6MAHMh490xTgC0qBh2lTfpb9u+WnAAu+p1Qo3b8zs1ES4svRpF6vPzo8wUEOvXw+bN8MgjETFv3w5r18KHH4ZjWUi9XjvmYtMGLzmqoSbiuduBA0Cj7L4uBv4GTAzjoeVcbPF0l14aqrOQqipWooToq1cHwMFgdAWqKsC98ELcX94chx404lO+JHi5RJ83WprAHkiqltTlLpDJSbjiisUlvFJ65ZWILJYbq1XJgSJ63g683CMc0/Zh8JfD7mVJgmPH4MAB2LAB1qwZ9UpSfHLuRUpxr3vfjoRtdjbGSmnxuUbnFTaxXwrs61izZncP+3xJl+RVSLR6uLRUCtiXXgoD3rEDVq0aNXYI3YfWBYeXDIBzc/Dww+HRyrtjaEPeKAvqyzh69KIe9lVEZlcP947lpdJOODkZ+j89HUwfOhTfU1Px7OxsPLduXVx/9FEA2LAh3i0ruVBAS04/DP0HRAhzbQK+mO8P45exqDt507QrsH8/PPdc+9zzz8d/i13Xdby70HWPN786jumihLS17OQed+9YiopnKlQ2xkLz8yvf3RejWJGiXlsS9vn5IuKaU6Vi5Av/W+z3qc7TatDnEnBOuXVaotvTIYzxSC6hPGxJwPSZmvl0k/KmKGlNcbdnLRUVSsCHcJaiaaswxxIwC6CIYc4mPKaV/38S0lvlhs9sJnvK5BbIGwn7TWwsNSr12bOBgtccyPFWAl4DUNhLd7n+n8lIVrF16Y0E/Jkot0T8fDaYSYmipR72Mdu/T6xd+ybwMhAV8TNc8jkpihy+qNWLWr3634mPPwZ4atjLsE/Ne42by5wseZiMOGvPsxw7Ngy6niZnXD7ViUpE271eWGjoBpUrpZa3XvZa+wF6OZn6O/ZvsG/KeUmPMKjxEHUDxSuvjCSp0LZto8C2bYucZOF741EkfdIAuyfpGTfNqwL1OtKaIXogFW2jZvlsEdpsb2ICtmyJ/0p+snnz6PXGjfEp4f34WlxUyaUoh31flnXqEUaTgL8Cv8K+OVffJzqATkwpBUOPPtpWSrqSLh6m5OPd634/8pNxVyWCxGICTymlA7mfUpfabobKjwXXA+tyqy15mOUvJqNOZjc7G2nuSkgKQMvn6i4boKSe7aOSdmWVFYOBU05VTbTR3gN2ErFY05YqTrBJLqxP9Xor+5RCxDggIu0rxnYn8CbRr2lIiQKk27/7OfBQLpsO8mrJS4E51a3nxPVgd373cx3rl4KfEaWruhRA2mZJZ5mYmxNTU/uQvondJ7xbt2R5JsiZWWeBTiAdpKq+TtPMZ9uI3WLXrk4PsTQXpWj2TE5WzM8/i/1Vh/H3RO7e5ic/GfZHW9i0JZ/nqapraZo5QnMabJRPRbSlvelhxttgJ+bna6amvob0mOyJiAqo8wT4k8hdwrMUELXjhMWE4bc0zdUjIGCkvDoEoltvZbirh6EnHzkCTfM9YC+lGZrb06VIdkLbWSEAWlUCqY9Uya6wH9CqVTeQUn8EREpo587hEMeph2dm2s0L5CNHzPQ0sq8H7ge25KUfODxd8SilmboyAKOnJUpLA+C/wA+RnqRpIKUWREelCh1XNdbOnVBVpVVtpqaieAf7SOkLSPfYHhAHBmSpb7tRbHReIOHjWF/wDLabvAIiDgwA/NT2xdhPEqcvhtGuB4PjQMASEvTjj8M774CEJyfR3FyVJQbweeBHwC3EAYKyF9TYJVIQ5L55a05xpqR1GN1DNVZ0bO8mejUQhwVqVVV41cOH0e7di/K7rCo0992Hiqq1Dck6q9JlSDdifwW4nM5JoVYii2x2nR4H8CrwB+BJ7Bfzs7HRldU7wUGaFQGJeQ1798IHH+BNmyItDkmHzq5fD7OzWzOgy4gO2BbgHKRp2wiOOCo27yL9Q/Yr2H/k/ff/yXnnlalC1S+5pOHtt6Pxs8QqdOl/NxTJGDuGck8AAAAASUVORK5CYII=",Et="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgEASABIAAD//gAgU1lTVEVNQVggSkZJRiBFbmNvZGVyIFZlci4yLjAA/9sAhAABAQEBAQECAgICAgICAgICAgICAgIDAwMDAwMDAwMDAwMDAwMEBAQEBAQEBAQEBAQEBQUFBQUFBQUFBgYGBwcHAQMDAwMDAwQEBAQEBAQEBAUFBQUFBQcHBwcHBwcICAgICAgICAoKCgoKCgoLCwsLCwsNDQ0NDQ8PDw8PDw8PDw//wAARCAFKARgDAREAAhEBAxEB/8QBogAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoLEAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+foBAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKCxEAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/90ABACM/9oADAMBAAIRAxEAPwD+nKuo6woAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA//0P6cq6jrCgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD//R/pyrqOsKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP/9L+nKuo6woAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA//0/6cq6jrCgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD//U/pyrqOsKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP/9X+nKuo6woAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA//1v6cq6jrCgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD//X/pyrqOsKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP/9D+nKuo6woAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA//0f6cq6jrCgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP/Z",se=({cat:t})=>{const s=E();p(h=>h.singlepost.post);const[A,o]=n.useState([]),[a,i]=n.useState(Number(localStorage.getItem("menu_currentpage"))),[l,d]=n.useState(null),[w,K]=n.useState(!1),{data:g=[],error:C,isLoading:c,isError:y,isSuccess:N,isFetching:f,isUninitialized:m}=nt({cat:t,currentpage:a-1},{skip:!w});n.useEffect(()=>{setTimeout(()=>{K(!0)},0)},[m]),n.useEffect(()=>{t!==void 0&&s(k(`?cat=${t}`))},[t]),n.useEffect(()=>{Object.keys(g).length!==0&&(o(g.data),d(g.pages))},[g]),n.useEffect(()=>{a==0&&i(1)},[a]);const r=async()=>{a+0>=l||(i(h=>h+1),s(te(a)),localStorage.setItem("menu_currentpage",a+1))};return c||m?e.jsxs("div",{className:"menu",children:[e.jsx("div",{className:"post",style:{alignItems:"center"},children:e.jsx("div",{children:e.jsxs("div",{className:"lds-ellipsis",children:[e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]})})}),e.jsx("div",{className:"box-more"})]}):e.jsxs("div",{className:"menu",children:[e.jsx("h1",{children:"Other posts you may like"}),A&&A.map(h=>e.jsxs("div",{className:"post",children:[e.jsx(x,{className:"link",to:`/post/${h.id}`,children:e.jsx(G,{src:h==null?void 0:h.sm,placeholderSrc:Et,width:"278.86",height:"330"})}),e.jsx("h2",{children:h.title}),e.jsx(x,{className:"link",to:`/post/${h.id}`,children:e.jsx("button",{children:"Read More"})})]},h.id)),e.jsx("div",{className:"box-more",children:e.jsx("button",{className:"btn-more",onClick:r,children:"More"})})]})},xe="/assets/bgImv4-431a50d2.png",bt={post:{},load:!1,status:"uninitialized"},_=v("post/getSinglePost",async(t,{rejectWithValue:s,dispatch:A})=>{try{const o=await j.get(`http://localhost:8888/api/posts/${t}`);localStorage.setItem("category",o.data.cat),A(Rt(o.data))}catch(o){console.log(o)}}),je=I({name:"post",initialState:bt,reducers:{setSinglePost:(t,s)=>{t.post=s.payload,t.load=!1}},extraReducers:t=>{t.addCase(_.pending,(s,A)=>{s.status="loading",s.load=!0}),t.addCase(_.fulfilled,(s,A)=>{s.status="fulfilled"})}}),{setSinglePost:Rt}=je.actions,Ut=je.reducer,Dt={deleteload:!1,status:"uninitialized",deleteinformation:""},ee=v("deleteload/getSinglePost",async(t,{rejectWithValue:s,dispatch:A})=>{try{const o=await j.delete(`http://localhost:8888/api/posts/${t}`,{withCredentials:!0});A(Ot(o.data))}catch(o){console.log(o)}}),ye=I({name:"deleteload",initialState:Dt,reducers:{deletePost:(t,s)=>{t.deleteload=!1,t.deleteinformation=s.payload},deletePostStatusNull:(t,s)=>{t.status="uninitialized"}},extraReducers:t=>{t.addCase(ee.pending,(s,A)=>{s.status="loading",s.deleteload=!0}),t.addCase(ee.fulfilled,(s,A)=>{s.status="fulfilled"})}}),{deletePost:Ot,deletePostStatusNull:Rs}=ye.actions,kt=ye.reducer,ve="http://localhost:8888/",Bt=()=>{const t=E(),s=p(c=>c.singlepost.post),A=p(c=>c.singlepost.load),o=p(c=>c.user.currentUser),a=s.userImg?`${ve+s.userImg}`:xe,i=p(c=>c.write.infoaboutaddorupdateapost),[l,d]=n.useState(""),w=O(),K=B(),g=w.pathname.split("/")[2];n.useEffect(()=>{t(_(g))},[g]);const C=async()=>{t(ee(g)),t(b("deleted")),K("/")};return n.useEffect(()=>()=>{t(b("deleted"))},[]),n.useEffect(()=>{localStorage.setItem("starnewpage",0),t(ue()),t(te(1))},[]),n.useEffect(()=>(i!==""&&i==="пост был удален"&&(console.log("information",i),d(i)),()=>{t(X()),d("")}),[i]),l!==""?e.jsx(fe,{info:l}):A?e.jsxs("div",{className:"single",children:[e.jsxs("div",{className:"content",children:[e.jsx("div",{className:"user",children:e.jsx("div",{className:"info",children:e.jsx("span",{})})}),e.jsx("h1",{}),e.jsx("div",{id:"single-desc",style:{minHeight:"100vh",flexGrow:"1"},children:e.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"center",alignItems:"center"},children:e.jsxs("div",{className:"lds-ellipsis",children:[e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]})})})]}),e.jsx(se,{})]}):s.length<1?e.jsx("div",{className:"single",children:e.jsx("div",{className:"posts",children:e.jsx("div",{id:"post",className:"post",children:e.jsxs("div",{className:"content",children:[e.jsx("h1",{id:"home-title"}),e.jsx("div",{id:"home-desc",style:{flexGrow:"1"},children:e.jsx("h1",{children:"Пока тут ничего нет..."})})]})},"")})}):e.jsxs("div",{className:"single",children:[e.jsxs("div",{className:"content",children:[e.jsx("div",{children:e.jsx(G,{src:s==null?void 0:s.xl,placeholderSrc:s==null?void 0:s.sm,width:"695.71"})}),e.jsxs("div",{className:"user",children:[e.jsx("img",{id:"avatar-img",src:a,alt:"avatar"}),e.jsxs("div",{className:"info",children:[e.jsx("span",{children:s==null?void 0:s.username}),e.jsxs("p",{children:["Posted ",M(s.date).fromNow()]})]}),o!==null?o.username===(s==null?void 0:s.username)&&e.jsxs("div",{className:"edit",children:[e.jsx(x,{to:`/write?edit=${s.id}`,state:s,children:e.jsx("img",{src:Pt,alt:""})}),e.jsx("img",{onClick:C,src:It,alt:""})]}):null]}),e.jsx("h1",{children:s.title}),e.jsx("div",{style:{flexGrow:"1"},id:"home-desc",dangerouslySetInnerHTML:{__html:s.desc}})]}),e.jsx(se,{cat:s.cat})]})};const Ft={userinfo:null,load:!1,statusloading:"uninitialized",errormessage:null},D=v("user/getUserInfo",async(t,{rejectWithValue:s,dispatch:A})=>{var o;try{const a=await j.post("http://localhost:8888/api/auth/userinfo",t,{withCredentials:!0});A(Qt(a.data))}catch(a){A(Lt((o=a==null?void 0:a.response)==null?void 0:o.data))}}),we=I({name:"file",initialState:Ft,reducers:{setUserInfo:(t,s)=>{t.userinfo=s.payload,t.load=!1},setStatusUserInfoNull:(t,s)=>{t.statusloading="uninitialized"},setStatusUserInfoError:(t,s)=>{t.errormessage=s.payload}},extraReducers:t=>{t.addCase(D.pending,(s,A)=>{s.statusloading="loading",s.loadfile=!0}),t.addCase(D.fulfilled,(s,A)=>{s.statusloading="fulfilled"})}}),{setUserInfo:Qt,setStatusUserInfoNull:Us,setStatusUserInfoError:Lt}=we.actions,Gt=we.reducer,Vt={display:"flex",padding:"8px 16px",alignItems:"center",fontFamily:"cursive",backgroundColor:"#fff",border:"1px solid #b9e7e7",color:"black",borderRadius:"3px",fontSize:"1rem"},Yt=()=>F.custom(e.jsxs("div",{style:Vt,children:[e.jsx("div",{children:"✅"}),e.jsx("div",{children:"Аватар загружен!"})]}),{duration:2e3,position:"top-center"}),Ht=()=>F.error("Добавьте файл",{duration:2e3,position:"top-center"}),Mt=()=>{const t=E(),s=p(r=>r.avatar.statusavatarupload),A=p(r=>r.user.currentUser),o=p(r=>r.userinfo.userinfo),a=p(r=>r.userinfo.errormessage),[i,l]=n.useState(JSON.parse(localStorage.getItem("user"))||null),[d,w]=n.useState(xe),K=p(r=>r.avatar.file),[g,C]=R.useState(null),[c,y]=R.useState(null);n.useEffect(()=>{JSON.parse(localStorage.getItem("user"))!==null&&t(D())},[]),n.useEffect(()=>{if(a!==null&&a==="Not authenticated!")t(userLogout());else if(o!==null){const r=JSON.stringify(o);JSON.stringify(localStorage.setItem("user",r))}},[o]);const N=B();n.useEffect(()=>{var r,h,P;return((r=JSON.parse(localStorage.getItem("user")))==null?void 0:r.img)!==void 0&&((h=JSON.parse(localStorage.getItem("user")))==null?void 0:h.img)!==null&&((P=JSON.parse(localStorage.getItem("user")))==null?void 0:P.img)!==""&&w(`${ve}`+JSON.parse(localStorage.getItem("user")).img),()=>{t(D())}},[]),n.useEffect(()=>{A==null&&N("/")},[A]),n.useEffect(()=>{var r,h;if(K!==null&&(l((r=K==null?void 0:K.file)==null?void 0:r.avatarName),A!==null)){let P={...A};P.img=(h=K==null?void 0:K.file)==null?void 0:h.avatarName,P.img!==void 0&&localStorage.setItem("user",JSON.stringify(P))}},[K]),n.useEffect(()=>{if(g!==null){const r=new FileReader;r.readAsDataURL(g),r.onloadend=()=>{y(r.result)}}},[g]),n.useEffect(()=>(s==="fulfilled"&&(Yt(),t(q({statusavatarupload:"uninitialized",file:K})),t(D())),()=>{t(q({statusavatarupload:"uninitialized"}))}),[s]);const f=async()=>{if(g!==null){const r=new FormData;r.append("file",g),t(Z(r)),C(null)}else Ht()},m=async r=>{r.preventDefault(),await f()};return e.jsxs("div",{className:"profile",children:[e.jsx("h1",{children:"Profile"}),c==null?e.jsxs("label",{children:[e.jsx("img",{style:{borderRadius:"50%",width:"120px",height:"120px",objectFit:"cover"},id:"avatar-img",src:d,alt:"avatar"}),e.jsx("input",{style:{display:"none"},hidden:!0,type:"file",name:"",id:"file",onChange:r=>C(r.target.files[0])})]}):e.jsx("img",{style:{borderRadius:"50%",width:"120px",height:"120px",objectFit:"cover"},id:"avatar-img",src:c,alt:"avatar"}),e.jsx("input",{style:{display:"none"},type:"file",name:"",id:"file",onChange:r=>C(r.target.files[0])}),e.jsx("label",{className:"btn-more",htmlFor:"file",children:"Upload avatar"}),e.jsx("div",{className:"buttons",children:e.jsx("button",{className:"btn-more",onClick:m,children:"Apply"})}),e.jsx(ne,{})]})},Wt=()=>e.jsxs(e.Fragment,{children:[e.jsx(ft,{}),e.jsx(De,{}),e.jsx(xt,{})]}),Jt=Pe([{path:"/",element:e.jsx(Wt,{}),children:[{path:"/",element:e.jsx(ht,{})},{path:"/post/:id",element:e.jsx(Bt,{})},{path:"/write",element:e.jsx(Nt,{})},{path:"/profile",element:e.jsx(Mt,{})}]},{path:"/register",element:e.jsx(Ve,{})},{path:"/login",element:e.jsx(ze,{})}]);function Tt(){return e.jsx("div",{className:"app",children:e.jsx("div",{className:"container",children:e.jsx(Ie,{router:Jt})})})}const zt=Ue({reducer:{userinfo:Gt,info:dt,post:$e,user:Je,singlepost:Ut,deletesinglepost:kt,register:Le,write:St,countpages:tt,avatar:At,[L.reducerPath]:L.reducer},middleware:t=>t().concat(L.middleware)}),Zt=new Be({defaultOptions:{queries:{retry:!1,refetchOnWindowFocus:!1}}});Ne.createRoot(document.getElementById("root")).render(e.jsx(Fe,{client:Zt,children:e.jsx(Ee,{store:zt,children:e.jsx(Tt,{})})}));
